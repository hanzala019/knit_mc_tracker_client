<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <!-- <link rel="manifest" href="./static/manifest.json">
    <link rel="shortcut icon" href="./static/icons/icon-256.png"> -->
    <link href="styles/style.css" rel="stylesheet">
</head>
<body class="login-section">

    <div class="login-container">
        <h2>Login</h2>
        <div id="email-error" class="error"></div>
        <input type="email" id="email" placeholder="email">
        <div id="password-error" class="error"></div>
        <input type="password" id="password" placeholder="Password">
        <button onclick="validateLogin()">Login</button>
    </div>
    
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            window.location.href = "chart.html"
        })
        function validateLogin() {
            // Clear previous error messages and reset borders
            const emailError = document.getElementById('email-error');
            const passwordError = document.getElementById('password-error');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
    
            emailError.textContent = '';
            passwordError.textContent = '';
            emailInput.classList.remove('error-border');
            passwordInput.classList.remove('error-border');
            
            // Get the input values
            const email = emailInput.value.trim();
            const password = passwordInput.value.trim();

            const api = "http://127.0.0.1:5000" || "https://knit-mc-tracker-server.onrender.com"
           
    
            // Validation for email
            if (!email) {
                emailError.textContent = 'Please enter your email.';
                emailInput.classList.add('error-border');
            }
    
            // Validation for password
            if (!password) {
                passwordError.textContent = 'Please enter your password.';
                passwordInput.classList.add('error-border');
            }
    
            // If both fields are valid, simulate login process
            if (email && password) {
                window.location.href = "chart.html"
                // const data = {
                //     email,
                //     password
                // }
                // // sending post request to backend for login
                //     fetch(`${api}/api/login`, {
                //     method: 'POST',
                //     headers: {
                //         'Content-Type': 'application/json'
                //     },
                //     body: JSON.stringify(data)
                // })
                // .then(response => response.json())
                // .then(data => {
                    
                //     // storing the user info in local storage if user exists
                //     if(data.status = "success"){
                //         window.localStorage.setItem("user", JSON.stringify(data.user))
                //         window.location.href = "chart.html"
                //     }
                //     // showing error for invalid credentials
                //     else{
                        
                //         passwordError.textContent = 'Invalid password.';
                //         passwordInput.classList.add('error-border');
                //         emailError.textContent = 'Inavlid email.';
                //         emailInput.classList.add('error-border');
             
                //     }
                //     console.log("Data sent successfully and Recieved:", data);
                // })
                // .catch(error => {
                //     console.error("Error sending data:", error);
                // });

            }
        }
//     if("serviceWorker" in navigator){
//     navigator.serviceWorker.register("./service-worker.js").then(r=>{
//         console.log("Service worker registered")
//         console.log(r)
//     })
//     .catch(e =>{
//         console.log("Registration failed")
//         console.log(e)
//     })
// }

// console.log(Notification.permission)
// if ('Notification' in window && Notification.permission !== 'granted') {
//   Notification.requestPermission().then((permission) => {
//     if (permission === 'granted') {

//       console.log('Notification permission granted.');
//     } else {
//       console.warn('Notification permission denied.');
//     }
//   });
// }
    </script>

</body>
</html>
